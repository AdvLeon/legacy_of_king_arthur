#################################################################
#																#
# 			Legacy of King Arthur - Coronation Events			#
#																#
#################################################################

# Written by AdvLeon #

namespace = loka_coronation

#################### Coronation Events ####################

# Send out Coronation Invites #
narrative_event = {
	id = loka_coronation.1
	title = loka_coronation.title.1
	desc = loka_coronation.desc.1
	picture = GFX_evt_courier
	border = GFX_event_narrative_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = loka_coronation.option.a.1
		character_event = { id = loka_coronation.3 days = 14 }
		any_realm_character = {
				limit = {
					age = 16
					NOT = { trait = incapable }
					prisoner = no
				}
				clr_character_flag = coronation_has_ended
				character_event = { id = loka_coronation.2 }
			}
	}
}

# Received Coronation Invitation #
character_event = {
	id = loka_coronation.2
	title = loka_coronation.title.2
	desc = loka_coronation.desc.2
	picture = GFX_evt_courier
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = loka_coronation.option.a.2
		prestige = 50
		set_character_flag = attending_coronation
		set_character_flag = do_not_disturb
	}
}

# Archbishop hidden grab #
character_event = {
	id = loka_coronation.3
	
	hide_window = yes
	is_triggered_only = yes
	
	option = {
		immediate = {
			d_arch_canterbury = {
				holder_scope = {
					character_event = { id = loka_coronation.4 }
				}
			}
		}
	}
}

# Archbishop hidden response #
character_event = {
	id = loka_coronation.4
	
	hide_window = yes
	is_triggered_only = yes
	
	option = {
		immediate = {
			FROM = { 
				narrative_event = { id = loka_coronation.5 } 
			}
		}
	}
}

# The Coronation Pt.1 #
narrative_event = {
	id = loka_coronation.5
	title = loka_coronation.title.5
	desc = loka_coronation.desc.5
	picture = GFX_evt_coronation
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = loka_coronation.option.a.5
		immediate = {
			d_arch_canterbury = {
				holder_scope = {
					character_event = { id = loka_coronation.6 }
				}
			}
		}
	}
}
# Archbishop hidden response #
character_event = {
	id = loka_coronation.6
	
	hide_window = yes
	is_triggered_only = yes
	
	option = {
		immediate = {
			FROM = { 
				narrative_event = { id = loka_coronation.7 } 
			}
		}
	}
}
# The Coronation Pt.2 #
narrative_event = {
	id = loka_coronation.7
	title = loka_coronation.title.7
	desc = loka_coronation.desc.7
	picture = GFX_evt_coronation
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = loka_coronation.option.a.7
		immediate = {
			d_arch_canterbury = {
				holder_scope = {
					character_event = { id = loka_coronation.8 }
				}
			}
		}
	}
}
# Archbishop hidden response #
character_event = {
	id = loka_coronation.8
	
	hide_window = yes
	is_triggered_only = yes
	
	option = {
		immediate = {
			FROM = { 
				narrative_event = { id = loka_coronation.9 } 
			}
		}
	}
}
# The Coronation Pt.3 #
narrative_event = {
	id = loka_coronation.9
	title = loka_coronation.title.9
	desc = loka_coronation.desc.9
	picture = GFX_evt_coronation
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = loka_coronation.option.a.9
		immediate = {
			d_arch_canterbury = {
				holder_scope = {
					character_event = { id = loka_coronation.10 }
				}
			}
		}
	}
}
# Archbishop hidden response #
character_event = {
	id = loka_coronation.10
	
	hide_window = yes
	is_triggered_only = yes
	
	option = {
		immediate = {
			FROM = { 
				narrative_event = { id = loka_coronation.11 } 
			}
		}
	}
}

narrative_event = {
	id = loka_coronation.11
	title = loka_coronation.title.11
	desc = loka_coronation.desc.11
	picture = GFX_evt_coronation
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = loka_coronation.option.a.11
		prestige = 1000
		if = {
			limit = { has_nickname = no }
			give_nickname = nick_the_great
		}
		activate_title = { title = e_isles status = yes }
		primary_title = {
			e_isles = {
				grant_title = ROOT
				copy_title_laws = PREV

			}
		}
		k_england = {
			de_jure_liege = e_isles
		}
		k_wales = {
			de_jure_liege = e_isles
		}
		k_ireland = {
			de_jure_liege = e_isles
		}
		k_scotland = {
			de_jure_liege = e_isles
		}
		add_artifact = loka_artifact_crown
	}
}


